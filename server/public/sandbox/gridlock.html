<html>
  <head>
    <script src="/vendor/jquery.min.js"></script>
    <script src="/vendor/jquery-ui-1.10.3.custom.min.js"></script>
    <script src="/js/gridlock.js"></script>
    <link rel="/vendor/jquery-ui-1.10.3.custom.min.css">
    <style>
      #wrapper {
        height: 400px;
        width: 250px;
        border: 1px solid #000;
        overflow: hidden;
      }

      #grid {
        width: 100%;
        height: 100%;
        background-color: #ccc;
      }

      .grid-item {
        background: rgba(0, 0, 0, 0.2);
      }
    </style>
  </head>
  <body>
    <div id="wrapper">
      <div id="grid">
      </div>
    </div>
    <button>Make rocket go now</button>
    <script>
      (function () {
        var grid = document.querySelector('#grid');

        GRIDLOCK.init();

        var k = GRIDLOCK.create(grid, 30, 30);

        var button = document.querySelector('button');
        button.onclick = function () {
          var item = document.createElement('div');
          item.classList.add('grid-item');
          var w = Math.ceil(Math.random()*4);
          var h = Math.ceil(Math.random()*4);

          w = 3;
          h = 3;
          item.style.width = w * 40 + 'px';
          item.style.height = h * 40 + 'px';
          grid.appendChild(item);
          $(item).draggable({
            drag: function (e, ui) {
              var element = ui.helper[0];
              k.project(element);
            },
            stop: function (e, ui) {
              var element = ui.helper[0];
              var position = k.evaluate(element);
              k.reset();
              element.style.left = position.x + 'px';
              element.style.top = position.y + 'px';
            }
          });
        };

      })();
    </script>
  </body>
</html>